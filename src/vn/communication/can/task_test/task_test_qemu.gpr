with "../can_task/can_task.gpr";
with "../can_interface/can_interface.gpr";

project Task_Test_Qemu is
   for Source_Dirs use ("src", "../../../../../../../bap-arm-ravenscar-repository-rev271/externals/lm3s811-includes");
   for Object_Dir use "obj";
   for Exec_Dir use ".";
   for Main use ("task_test_main.adb");

   package Builder is
      for Default_Switches ("Ada") use
         ("-gnat2005", "-g", "-x", "-a", "-gnatn", "-gnata", "-nostdinc", "-nostdlib");
   end Builder;

   package Compiler is
      for Default_Switches ("Ada") use
      	  ("-O0", "-g", "-ggdb", "-ffunction-sections", "-fdata-sections", "-mcpu=cortex-m3", "-mthumb");
   end Compiler;

   package Binder is
      for Default_Switches ("Ada") use ("-nostdinc", "-nostdlib");
      -- "-n"
   end Binder;

-- To reduce size of final binary.
   package Linker is
      for Default_Switches ("Ada") use ("-nostartfiles", "-nodefaultlibs", "-nostdlib", "-lgcc", "-T../../../../../../../bap-arm-ravenscar-repository-rev271/support/link-lm3s811.ld", "obj/startup-lm3s811.o", "-v");
   end Linker;
end Task_Test_Qemu;

